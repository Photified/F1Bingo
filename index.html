<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 2026: AUSTRALIAN GP BINGO</title>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,400;0,600;0,700;0,900;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            /* CORE THEME */
            --brand-red: #e10600;
            --brand-dark: #15151e;
            --bg-body: #f0f0f5;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.08);
            
            /* CATEGORY COLORS (Vibrant & Distinct) */
            --c-driver: #ff9500; 
            --c-team: #00d2be;   
            --c-tech: #2962ff;   
            --c-chaos: #d50000;  
        }

        body {
            font-family: 'Titillium Web', sans-serif;
            background: var(--bg-body);
            color: var(--brand-dark);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- HEADER --- */
        header {
            background: white;
            border-bottom: 4px solid var(--brand-red);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            z-index: 20;
        }

        .brand-section h1 {
            margin: 0;
            font-size: 26px;
            font-weight: 900;
            font-style: italic;
            text-transform: uppercase;
            letter-spacing: -0.5px;
            line-height: 1;
        }

        .brand-section .subtitle {
            font-size: 14px;
            color: #888;
            font-weight: 600;
            letter-spacing: 1px;
            margin-top: 2px;
        }

        .actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 50px;
            border: none;
            font-weight: 700;
            font-size: 13px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .btn-save { background: var(--brand-red); color: white; }
        .btn-save:hover { background: #b30000; transform: translateY(-1px); }
        
        .btn-reset { background: #e0e0e0; color: #555; }
        .btn-reset:hover { background: #d0d0d0; color: #000; }

        /* --- LAYOUT --- */
        .main-layout {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 25px;
            overflow: hidden;
        }

        /* --- LEFT SIDEBAR (The Market) --- */
        .sidebar {
            width: 380px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .category-nav {
            display: flex;
            border-bottom: 1px solid #eee;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 16px 5px;
            font-size: 12px;
            font-weight: 800;
            color: #bbb;
            cursor: pointer;
            transition: 0.2s;
            text-transform: uppercase;
        }

        .nav-item:hover { background: #fafafa; color: #888; }
        
        /* Active States with Underline glow */
        .nav-item.active { background: white; color: var(--brand-dark); position: relative; }
        .nav-item.active::after {
            content:''; position: absolute; bottom:0; left:0; width:100%; height:4px;
        }
        .nav-item[data-cat="driver"].active::after { background: var(--c-driver); }
        .nav-item[data-cat="team"].active::after { background: var(--c-team); }
        .nav-item[data-cat="tech"].active::after { background: var(--c-tech); }
        .nav-item[data-cat="chaos"].active::after { background: var(--c-chaos); }

        .pool-container {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #fafafa;
        }

        /* --- DRAGGABLE CARDS (Improved) --- */
        .card-chip {
            background: white;
            padding: 14px 18px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 6px solid #ccc;
            font-weight: 600;
            font-size: 14px;
            color: #333;
            cursor: grab;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-chip:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .card-chip.driver { border-left-color: var(--c-driver); }
        .card-chip.team { border-left-color: var(--c-team); }
        .card-chip.tech { border-left-color: var(--c-tech); }
        .card-chip.chaos { border-left-color: var(--c-chaos); }

        .card-chip i { font-style: normal; font-size: 16px; opacity: 0.5; }

        /* --- RIGHT AREA (Game Board) --- */
        .game-board {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            padding: 25px;
            position: relative;
        }

        /* TEMPLATE SELECTOR (New UX) */
        .strategy-deck {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 10px;
        }

        .strat-card {
            padding: 8px 16px;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            opacity: 0.6;
            transition: 0.2s;
            background: white;
        }

        .strat-card:hover { opacity: 1; border-color: #ccc; }
        
        .strat-card.active {
            opacity: 1;
            border-color: var(--brand-red);
            background: #fff5f5;
            color: var(--brand-red);
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(225, 6, 0, 0.15);
        }

        .strat-title { font-size: 13px; text-transform: uppercase; }
        .strat-desc { font-size: 10px; font-weight: 400; color: #777; margin-top: 2px; }

        /* BINGO GRID */
        .bingo-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 10px;
            height: 100%;
            width: 100%;
            max-width: 800px;
            aspect-ratio: 1/1;
            margin: 0 auto;
        }

        .slot {
            position: relative;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 5px;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        /* Empty Slot Visuals */
        .slot:empty {
            background: #f8f8f8;
            border-color: #eee;
        }

        .slot:empty::after {
            content: attr(data-label);
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            opacity: 0.5;
            letter-spacing: 1px;
        }

        /* Color Coding for Empty Slots */
        .slot[data-req="driver"]:empty { background: #fff8f0; border-color: #ffe0b2; color: var(--c-driver); }
        .slot[data-req="team"]:empty   { background: #f0fdfc; border-color: #b2dfdb; color: var(--c-team); }
        .slot[data-req="tech"]:empty   { background: #f0f7ff; border-color: #bbdefb; color: var(--c-tech); }
        .slot[data-req="chaos"]:empty  { background: #fff0f0; border-color: #ffcdd2; color: var(--c-chaos); }

        /* Filled Slot */
        .slot.filled {
            color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            font-size: 12px;
            font-weight: 600;
            line-height: 1.3;
            padding: 8px;
            cursor: pointer;
            border: none;
        }

        .slot.filled[data-type="driver"] { background: var(--c-driver); }
        .slot.filled[data-type="team"]   { background: var(--c-team); }
        .slot.filled[data-type="tech"]   { background: var(--c-tech); }
        .slot.filled[data-type="chaos"]  { background: var(--c-chaos); }

        .slot.filled:hover::before {
            content: '√ó';
            position: absolute;
            top: 2px;
            right: 5px;
            font-size: 14px;
            opacity: 0.8;
        }

        /* Center Free Space */
        .slot.free-space {
            background: radial-gradient(circle, #222, #000);
            color: var(--brand-red);
            font-weight: 900;
            font-size: 18px;
            text-transform: uppercase;
            border: 3px solid var(--brand-red);
        }

        /* Drag Interactions */
        .slot.drag-hover { transform: scale(1.05); z-index: 10; opacity: 1; }
        .slot.drag-reject { animation: shake 0.3s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

    </style>
</head>
<body>

<header>
    <div class="brand-section">
        <h1>F1 <span style="color:var(--brand-red)">BINGO</span></h1>
        <div class="subtitle">üá¶üá∫ AUSTRALIAN GRAND PRIX 2026</div>
    </div>
    <div class="actions">
        <button class="btn btn-save" onclick="saveCard()">Save Card</button>
        <button class="btn btn-reset" onclick="clearCard()">Reset</button>
    </div>
</header>

<div class="main-layout">
    
    <div class="sidebar">
        <div class="category-nav">
            <div class="nav-item active" data-cat="driver" onclick="setCategory('driver')">Drivers</div>
            <div class="nav-item" data-cat="team" onclick="setCategory('team')">Teams</div>
            <div class="nav-item" data-cat="tech" onclick="setCategory('tech')">Tech</div>
            <div class="nav-item" data-cat="chaos" onclick="setCategory('chaos')">Chaos</div>
        </div>
        
        <div id="pool" class="pool-container">
            </div>
    </div>

    <div class="game-board">
        
        <div class="strategy-deck">
            <div class="strat-card active" onclick="setTemplate('balanced')" id="t-balanced">
                <div class="strat-title">‚öñÔ∏è Balanced</div>
                <div class="strat-desc">Standard Mix</div>
            </div>
            <div class="strat-card" onclick="setTemplate('tech')" id="t-tech">
                <div class="strat-title">üîß Tech Spec</div>
                <div class="strat-desc">Regs Focused</div>
            </div>
            <div class="strat-card" onclick="setTemplate('chaos')" id="t-chaos">
                <div class="strat-title">üö© Chaos Agent</div>
                <div class="strat-desc">Crashes & Flags</div>
            </div>
            <div class="strat-card" onclick="setTemplate('driver')" id="t-driver">
                <div class="strat-title">üèéÔ∏è Silly Season</div>
                <div class="strat-desc">Driver Drama</div>
            </div>
        </div>

        <div id="grid" class="bingo-grid">
            </div>

    </div>
</div>

<script>
    // --- APP STATE ---
    let poolData = {};
    let currentCategory = 'driver';
    let currentTemplate = 'balanced';
    let gridState = Array(25).fill(null);

    // --- TEMPLATES ---
    const templates = {
        balanced: [
            'driver','driver','team','tech','chaos',
            'driver','team','tech','chaos','driver',
            'team','tech','FREE','driver','team',
            'tech','chaos','driver','team','tech',
            'chaos','driver','team','tech','chaos'
        ],
        tech: [
            'tech','tech','team','driver','tech',
            'tech','team','driver','tech','chaos',
            'team','driver','FREE','tech','tech',
            'driver','tech','chaos','tech','team',
            'tech','team','tech','driver','chaos'
        ],
        chaos: [
            'chaos','chaos','driver','team','chaos',
            'chaos','driver','team','chaos','tech',
            'driver','team','FREE','chaos','chaos',
            'team','chaos','tech','chaos','driver',
            'chaos','driver','chaos','team','chaos'
        ],
        driver: [
            'driver','driver','driver','team','driver',
            'driver','team','chaos','driver','driver',
            'team','driver','FREE','driver','team',
            'driver','chaos','team','driver','driver',
            'driver','driver','team','driver','chaos'
        ]
    };

    // --- INIT ---
    async function init() {
        await loadData();
        loadSavedState(); // Tries to load existing game
        if(!gridState.some(x=>x)) applyTemplate(currentTemplate); // If empty, apply default
        renderPool();
    }

    async function loadData() {
        try {
            const res = await fetch('data.json');
            poolData = await res.json();
        } catch (e) {
            console.error("JSON Error:", e);
            document.getElementById('pool').innerHTML = "<p style='text-align:center; padding:20px; color:red'>Error: data.json not found.</p>";
        }
    }

    // --- TEMPLATE LOGIC ---
    function setTemplate(name) {
        // Visual UI update
        document.querySelectorAll('.strat-card').forEach(el => el.classList.remove('active'));
        document.getElementById(`t-${name}`).classList.add('active');
        
        // Logic update
        if (confirm("Switching strategy will reset the board. Continue?")) {
            currentTemplate = name;
            gridState = Array(25).fill(null);
            applyTemplate(name);
        }
    }

    function applyTemplate(name) {
        const pattern = templates[name];
        const grid = document.getElementById('grid');
        grid.innerHTML = '';

        pattern.forEach((type, index) => {
            const slot = document.createElement('div');
            
            if (type === 'FREE') {
                slot.className = 'slot free-space';
                slot.innerText = "LIGHTS OUT";
            } else {
                slot.className = 'slot';
                slot.dataset.index = index;
                slot.dataset.req = type;
                slot.dataset.label = type;

                // Drag Events
                slot.ondragover = e => e.preventDefault();
                slot.ondragenter = e => {
                    if(!e.dataTransfer.types.includes('text/plain')) return;
                    slot.classList.add('drag-hover');
                };
                slot.ondragleave = () => slot.classList.remove('drag-hover');
                slot.ondrop = e => handleDrop(e, slot);
                slot.onclick = () => clearSlot(index);
                
                // Re-fill if state exists
                if (gridState[index]) {
                    fillSlotUI(slot, gridState[index].text, gridState[index].type);
                }
            }
            grid.appendChild(slot);
        });
    }

    // --- POOL LOGIC ---
    function setCategory(cat) {
        currentCategory = cat;
        document.querySelectorAll('.nav-item').forEach(el => {
            el.classList.toggle('active', el.dataset.cat === cat);
        });
        renderPool();
    }

    function renderPool() {
        const container = document.getElementById('pool');
        container.innerHTML = '';
        
        if (!poolData[currentCategory]) return;

        // Icons map
        const icons = { driver: 'üèéÔ∏è', team: 'üõ†Ô∏è', tech: 'üîã', chaos: 'üö©' };

        poolData[currentCategory].forEach(text => {
            const chip = document.createElement('div');
            chip.className = `card-chip ${currentCategory}`;
            chip.innerHTML = `<span>${text}</span> <i>${icons[currentCategory]}</i>`;
            chip.draggable = true;
            
            chip.ondragstart = e => {
                e.dataTransfer.setData('text', text);
                e.dataTransfer.setData('type', currentCategory);
            };
            container.appendChild(chip);
        });
    }

    // --- DRAG & DROP ---
    function handleDrop(e, slot) {
        e.preventDefault();
        slot.classList.remove('drag-hover');

        const text = e.dataTransfer.getData('text');
        const type = e.dataTransfer.getData('type');
        const required = slot.dataset.req;

        // Validation
        if (type !== required) {
            slot.classList.add('drag-reject');
            setTimeout(() => slot.classList.remove('drag-reject'), 400);
            return;
        }

        // Save State
        const idx = slot.dataset.index;
        gridState[idx] = { text, type };
        fillSlotUI(slot, text, type);
        saveCard();
    }

    function fillSlotUI(slot, text, type) {
        slot.innerText = text;
        slot.classList.add('filled');
        slot.dataset.type = type;
    }

    function clearSlot(index) {
        if (!gridState[index]) return;
        gridState[index] = null;
        
        // Re-render just this slot
        const slot = document.querySelector(`.slot[data-index="${index}"]`);
        slot.innerText = '';
        slot.classList.remove('filled');
        delete slot.dataset.type;
        saveCard();
    }

    // --- SAVING ---
    function saveCard() {
        const data = {
            template: currentTemplate,
            grid: gridState
        };
        localStorage.setItem('f1_bingo_aus_2026', JSON.stringify(data));
        // Visual feedback could go here
    }

    function loadSavedState() {
        const saved = localStorage.getItem('f1_bingo_aus_2026');
        if (saved) {
            const data = JSON.parse(saved);
            currentTemplate = data.template;
            gridState = data.grid;
            
            // Highlight correct template button
            document.querySelectorAll('.strat-card').forEach(el => el.classList.remove('active'));
            document.getElementById(`t-${currentTemplate}`).classList.add('active');
        }
    }

    function clearCard() {
        if(confirm("Clear the entire board?")) {
            localStorage.removeItem('f1_bingo_aus_2026');
            location.reload();
        }
    }

    // Start
    window.onload = init;

</script>
</body>
</html>